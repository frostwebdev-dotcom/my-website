<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Libraries</title>
    
    <!-- Load libraries -->
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://unpkg.com/docx@7.8.2/build/index.js"></script>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        pre {
            background: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>üîç Library Debug Page</h1>
    <p>This page checks if all required libraries are loaded correctly.</p>
    
    <div id="results"></div>
    
    <script>
        window.addEventListener('load', () => {
            const results = document.getElementById('results');
            
            function addResult(title, status, message, details = null) {
                const div = document.createElement('div');
                div.className = `status ${status}`;
                div.innerHTML = `
                    <h3>${title}</h3>
                    <p>${message}</p>
                    ${details ? `<pre>${details}</pre>` : ''}
                `;
                results.appendChild(div);
            }
            
            // Check PDFLib
            if (typeof PDFLib !== 'undefined') {
                const keys = Object.keys(PDFLib).slice(0, 10).join(', ');
                addResult(
                    '‚úÖ PDF-Lib',
                    'success',
                    'PDF-Lib library loaded successfully!',
                    `Available: ${keys}...`
                );
            } else {
                addResult(
                    '‚ùå PDF-Lib',
                    'error',
                    'PDF-Lib library NOT loaded!',
                    'Check network tab for loading errors'
                );
            }
            
            // Check PDF.js
            if (typeof pdfjsLib !== 'undefined') {
                addResult(
                    '‚úÖ PDF.js',
                    'success',
                    'PDF.js library loaded successfully!',
                    `Version: ${pdfjsLib.version || 'unknown'}`
                );
            } else {
                addResult(
                    '‚ùå PDF.js',
                    'error',
                    'PDF.js library NOT loaded!',
                    'Check network tab for loading errors'
                );
            }
            
            // Check DOCX
            if (typeof window.docx !== 'undefined') {
                const keys = Object.keys(window.docx).slice(0, 10).join(', ');
                addResult(
                    '‚úÖ DOCX',
                    'success',
                    'DOCX library loaded successfully!',
                    `Available: ${keys}...`
                );
            } else {
                // Check for alternative names
                const docxKeys = Object.keys(window).filter(k => 
                    k.toLowerCase().includes('doc') || 
                    k.toLowerCase().includes('word')
                );
                
                addResult(
                    '‚ùå DOCX',
                    'error',
                    'DOCX library NOT loaded as window.docx!',
                    `Possible alternatives: ${docxKeys.join(', ') || 'none found'}\n\nAll globals: ${Object.keys(window).length} total`
                );
            }
            
            // Summary
            const allLoaded = typeof PDFLib !== 'undefined' && 
                            typeof pdfjsLib !== 'undefined' && 
                            typeof window.docx !== 'undefined';
            
            if (allLoaded) {
                addResult(
                    'üéâ All Libraries Loaded',
                    'success',
                    'All required libraries are loaded and ready to use!'
                );
            } else {
                addResult(
                    '‚ö†Ô∏è Some Libraries Missing',
                    'error',
                    'Some libraries failed to load. Check the errors above and your network connection.',
                    'Try refreshing the page (Ctrl+F5) or check browser console for errors.'
                );
            }
            
            // Console output
            console.log('=== Library Debug Info ===');
            console.log('PDFLib:', typeof PDFLib);
            console.log('pdfjsLib:', typeof pdfjsLib);
            console.log('window.docx:', typeof window.docx);
            console.log('All window keys containing "doc":', 
                Object.keys(window).filter(k => k.toLowerCase().includes('doc'))
            );
        });
    </script>
</body>
</html>

